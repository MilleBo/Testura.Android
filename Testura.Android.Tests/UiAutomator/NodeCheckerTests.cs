using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Xml.Linq;
using Moq;
using NUnit.Framework;
using NUnit.Framework.Internal;
using Testura.Android.UiAutomator;

namespace Testura.Android.Tests.UiAutomator
{
    [TestFixture]
    public class NodeCheckerTests
    {
        private const string Page =
            @"<?xml version='1.0' encoding='UTF-8' standalone='yes' ?><hierarchy rotation=""0""><node index=""0"" text="""" resource-id="""" class=""android.widget.FrameLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,0][1080,1920]""><node index=""0"" text="""" resource-id="""" class=""android.widget.LinearLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,0][1080,1920]""><node index=""0"" text="""" resource-id=""android:id/content"" class=""android.widget.FrameLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,0][1080,1920]""><node index=""0"" text="""" resource-id=""com.sec.android.app.launcher:id/animation_layer"" class=""android.widget.FrameLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,0][1080,1920]""><node index=""0"" text="""" resource-id=""com.sec.android.app.launcher:id/darken_layer"" class=""android.view.View"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,0][1080,1920]"" /><node index=""1"" text="""" resource-id=""com.sec.android.app.launcher:id/menu_view"" class=""android.widget.TabHost"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""true"" focused=""true"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,75][1080,1920]""><node index=""0"" text="""" resource-id=""com.sec.android.app.launcher:id/menu_container"" class=""android.widget.FrameLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,75][1080,1920]""><node index=""0"" text="""" resource-id=""com.sec.android.app.launcher:id/tabs_container"" class=""android.widget.FrameLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,75][1080,219]""><node index=""0"" text="""" resource-id="""" class=""android.widget.FrameLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,75][1080,219]""><node index=""0"" text="""" resource-id="""" class=""android.widget.FrameLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,75][1080,219]""><node index=""0"" text=""Program"" resource-id=""com.sec.android.app.launcher:id/menu_title"" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Program Sk?rm"" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,75][1080,219]"" /></node></node></node><node index=""1"" text="""" resource-id=""android:id/tabcontent"" class=""android.widget.FrameLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,219][1080,1920]""><node index=""0"" text="""" resource-id="""" class=""android.widget.FrameLayout"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,219][1080,1920]""><node index=""0"" text="""" resource-id=""com.sec.android.app.launcher:id/apps_grid"" class=""android.view.View"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""true"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,219][1080,1920]""><node index=""0"" text="""" resource-id="""" class=""android.view.View"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,199][1080,1859]""><node index=""0"" text="""" resource-id="""" class=""android.view.View"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[6,219][1074,1839]""><node index=""0"" text=""Barnl?ge"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Barnl?ge"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[6,219][273,543]"" /><node index=""1"" text=""ChatON"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""ChatON"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[273,219][540,543]"" /><node index=""2"" text=""Chrome"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Chrome"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[540,219][807,543]"" /><node index=""3"" text=""Google Drive"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Google Drive"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[807,219][1074,543]"" /><node index=""4"" text=""Dropbox"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Dropbox"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[6,543][273,867]"" /><node index=""5"" text=""E-post"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""E-post"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[273,543][540,867]"" /><node index=""6"" text=""Earth"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Earth"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[540,543][807,867]"" /><node index=""7"" text=""Galleri"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Galleri"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[807,543][1074,867]"" /><node index=""8"" text=""Gmail"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Gmail"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[6,867][273,1191]"" /><node index=""9"" text=""Google"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Google"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[273,867][540,1191]"" /><node index=""10"" text=""Google Inst?llningar"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Google Inst?llningar"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[540,867][807,1191]"" /><node index=""11"" text=""Google+"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Google+"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[807,867][1074,1191]"" /><node index=""12"" text=""Group Play"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Group Play"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[6,1191][273,1515]"" /><node index=""13"" text=""Hangouts"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Hangouts"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[273,1191][540,1515]"" /><node index=""14"" text=""Hj?lp"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Hj?lp"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[540,1191][807,1515]"" /><node index=""15"" text=""Inst?llningar"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Inst?llningar"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[807,1191][1074,1515]"" /><node index=""16"" text=""Internet"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Internet"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[6,1515][273,1839]"" /><node index=""17"" text=""Kalkylator"" resource-id="""" class=""android.widget.TextView"" package=""com.sec.android.app.launcher"" content-desc=""Kalkylator"" checkable=""false"" checked=""false"" clickable=""true"" enabled=""true"" focusable=""true"" focused=""false"" scrollable=""false"" long-clickable=""true"" password=""false"" selected=""false"" bounds=""[273,1515][540,1839]"" /></node></node></node></node><node index=""1"" text="""" resource-id="""" class=""android.view.View"" package=""com.sec.android.app.launcher"" content-desc="""" checkable=""false"" checked=""false"" clickable=""false"" enabled=""true"" focusable=""false"" focused=""false"" scrollable=""false"" long-clickable=""false"" password=""false"" selected=""false"" bounds=""[0,219][1080,1920]"" /></node></node></node></node></node></node></node></hierarchy>";

        private NodeChecker nodeChecker;
        private Mock<IScreenDumper> screenDumper;

        [SetUp]
        public void SetUp()
        {
           screenDumper = new Mock<IScreenDumper>();
            screenDumper.Setup(s => s.DumpUi()).ReturnsAsync(XDocument.Parse(Page));
           nodeChecker = new NodeChecker(screenDumper.Object);
        }


        [Test]
        public void Do()
        {
            var nodes = nodeChecker.GetUiNodes(By.Text("Kalkylator"));
            var i = 1;
        }
    }
}
